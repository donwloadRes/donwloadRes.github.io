---
layout: post
title: "STM8单片机开发环境搭建与标准库工程创建"
date:   2021-01-16
tags: [STM8,IAR,工程,创建,文件]
comments: true
author: admin
---
# STM8单片机开发环境搭建与标准库工程创建

本文档旨在帮助开发者搭建STM8单片机的开发环境，并创建基于标准库的工程项目。通过本文档，您将了解如何配置开发环境、下载标准库、创建工程以及进行基本的工程配置。

## 1. 开发环境搭建

### 1.1 软件准备
- **IAR Embedded Workbench for STM8**: 这是一个集成开发环境，具有高度优化的C/C++编译器和全面的C-SPY调试器。它为STM8系列微控制器提供全面支持。
- **STM8标准库**: 可以从STM官网下载最新的标准库文件。

### 1.2 安装步骤
1. **安装IAR**: 从官网下载并安装IAR Embedded Workbench for STM8。安装过程简单，按照提示点击“下一步”即可完成。
2. **注册IAR**: 注册过程稍微繁琐，但为了免费使用，需要耐心完成。
3. **下载STM8标准库**: 在STM官网搜索并下载最新的标准库文件。

## 2. 创建标准库工程

### 2.1 工程目录结构
1. **创建工作目录**: 在自己的工作目录下创建一个工程目录，用于存放IAR生成的文件。
2. **拷贝标准库文件**: 将下载的标准库文件拷贝到工作目录中。

### 2.2 工程创建步骤
1. **启动IAR**: 打开IAR Embedded Workbench for STM8。
2. **新建工程**: 在IAR中创建一个新的工程，并将其保存在之前创建的工程目录下。
3. **添加Group**: 在工程中添加几个Group，分别用于存放库文件、自己的C文件和其他模块的C文件。
4. **导入C文件**: 右键Group，导入所需的C文件。

### 2.3 工程配置
1. **配置芯片型号**: 在工程选项中配置自己的芯片型号。
2. **添加头文件路径**: 添加标准库的头文件路径到工程中。
3. **定义芯片宏**: 在工程中定义芯片相关的宏。

## 3. 常见问题与解决方案

### 3.1 编译错误
- **错误1**: 保存工程时报错“ewp could not be written”。
  - **解决方案**: 尝试重新创建工程，不要在原路径下删除工程文件再创建。
- **错误2**: 编译时报错“debugger file could not be written”。
  - **解决方案**: 检查工程路径和文件权限，确保IAR有写入权限。

### 3.2 程序下载调试
- **连接ST-link**: 使用ST-link连接芯片的SWIM和RST线。
- **配置调试选项**: 在IAR中配置调试选项，确保连接到芯片进行调试。

## 4. 注意事项
- **头文件路径**: 建议使用相对路径配置头文件路径，以便在复制移动工程后可以直接编译。
- **独立供电**: 如果遇到烧写错误，尝试给单片机独立供电。

通过以上步骤，您应该能够成功搭建STM8单片机的开发环境，并创建基于标准库的工程项目。希望本文档能帮助您顺利进行STM8单片机的开发工作。

## 下载链接

[STM8单片机开发环境搭建与标准库工程创建分享](https://pan.quark.cn/s/bd8a63836997)