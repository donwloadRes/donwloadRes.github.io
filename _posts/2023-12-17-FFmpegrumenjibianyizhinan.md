---
layout: post
title: "FFmpeg入门及编译指南"
date:   2023-06-20
tags: [FFmpeg,音视频,编译,模块,封装]
comments: true
author: admin
---
# FFmpeg入门及编译指南

## 简介
FFmpeg是一个广泛使用的多媒体解决方案，既是一款音视频编解码工具，同时也是一组音视频编解码开发套件。它为开发者提供了丰富的音视频处理的调用接口，包括多种媒体格式的封装和解封装、多种音视频编码、多种协议的流媒体、多种色彩格式转换、多种采样率转换、多种码率转换等。FFmpeg发展至今，已经被许多开源项目使用。

## 基本组成
FFmpeg框架的基本组成包括以下几个模块：
1. **封装模块 - AVFormat**：文件格式和协议库，封装了Protocol层和Demuxer、Muxer层，支持多种媒体封装格式和网络协议封装格式。
2. **编解码模块 - AVCodec**：编解码库，支持多种编解码格式，既支持编码也支持解码，并且支持第三方编解码器。
3. **滤镜模块 - AVFilter**：提供了一个通用的音频、视频、字幕等滤镜处理框架，支持多种音视频特效处理。
4. **视频图像转换计算模块 - swscale**：提供高级别的图像转换API，支持图像缩放和像素格式转换。
5. **音频转换计算模块 - swresample**：提供高级别的音频重采样API，支持声道数、数据格式、采样率等多种基本信息的转换。
6. **AVUtil - 核心工具库**：最基础的模块之一，许多其他模块都会依赖该库做一些基本的音视频处理操作。
7. **AVDevice - 硬件采集、加速、显示**：输入输出设备库，支持硬件采集、加速和显示。

## 命令行工具
FFmpeg已经编译好了三个常用的工具集：
- **ffmpeg.exe**：主要用于对音视频进行处理，如剪切、抽取视频、抽取音频、增加贴纸水印等。
- **ffplay.exe**：主要用于播放视频，支持几乎所有的本地视频播放和流媒体等网络视频播放。
- **ffprobe.exe**：主要用于查看音视频文件格式，可以将音视频文件的所有信息以JSON格式输出。

## Windows下编译FFmpeg
本文详细介绍了在Windows环境下编译FFmpeg的步骤，包括准备编译环境、下载FFmpeg源码、修改MSYS2配置、安装其他编译工具、编译FFmpeg库以及在VS项目中引用FFmpeg库等内容。

## 依赖库编译
本文还介绍了如何编译FFmpeg的依赖库，如SDL、x264和fdk-aac，并详细说明了如何在FFmpeg中使用这些编译好的库。

## 总结
通过本文的学习，您可以掌握FFmpeg的基本知识，了解其框架组成，学会在Windows环境下编译FFmpeg及其依赖库，并能够在VS项目中引用FFmpeg库进行开发。

## 下载链接

[FFmpeg入门及编译指南](https://pan.quark.cn/s/873eadff1d97)