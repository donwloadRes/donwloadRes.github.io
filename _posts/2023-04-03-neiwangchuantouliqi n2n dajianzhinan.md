---
layout: post
title: "内网穿透利器 n2n 搭建指南"
date:   2023-08-07
tags: [n2n,Zerotier,服务端,客户端,打孔]
comments: true
author: admin
---
# 内网穿透利器 n2n 搭建指南

## 简介

n2n 是一种 C/S 架构的内网穿透服务，不同于 FRP 的反向代理，它的原理类似于 Zerotier，先进行打孔，打孔失败再尝试转发。n2n 的优势在于能够打孔，因此速度和用户容量全面优于 FRP，延迟大致持平。与 Zerotier 相比，n2n 的优势在于开源、全开源、服务端和客户端均轻量，结构比 Zerotier 更简单，实施时只需要配好配置文件和脚本传给客户，客户每次运行脚本即可连接，对小白客户的实施也比 Zerotier 容易。

## 安装 n2n 服务端

1. 下载 n2n 安装包，根据系统类型选择合适的安装包。
2. 使用 `apt` 安装 deb 包。
3. 安装完毕后，使用 `systemctl` 启动 `supernode` 服务。

## 安装 n2n 客户端

1. 在本地 PC 上安装 n2n 客户端，如果是 Linux 系统，安装步骤与服务端相同。
2. 对于 Windows 系统，需要用 Visual Studio 编译源码，或使用提供的编译好的 n2n-3.0 版本。
3. 配置客户端连接服务端的参数，包括服务器的 IP 和端口、公钥、community 等。

## 配置用户权限

1. 在云服务器上修改配置文件，加入用户名密码的方式强化 n2n 服务器的访问权限。
2. 使用 `n2n-keygen` 工具生成密文，并将其添加到 `community list` 中。
3. 重启 n2n 服务端，确保配置生效。

## 编写批处理脚本 (Windows)

1. 编写批处理脚本，简化客户端的启动过程，方便小白用户使用。
2. 用户只需双击脚本即可加入房间，进行联机。

## 杂谈

n2n 不仅适用于游戏联机，还可以用于遥控家里的智能设备，如树莓派等。n2n 的分布式特性使其在某些场景下可能脱颖而出，尤其是在需要低延迟和高速度的场景中。

## 下载链接

[内网穿透利器n2n搭建指南](https://pan.quark.cn/s/f7bcf0145517)