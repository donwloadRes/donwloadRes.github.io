---
layout: post
title: "STM32按键控制PWM占空比实现呼吸灯效果"
date:   2022-06-26
tags: [按键,引脚,PWM,STM32,占空比]
comments: true
author: admin
---
# STM32按键控制PWM占空比实现呼吸灯效果

## 项目描述

本项目通过STM32微控制器实现了一个简单的呼吸灯效果。通过按键控制PWM信号的占空比，从而控制LED的亮度变化。具体实现功能如下：

- **硬件资源**：
  - LED1：连接到PA8引脚
  - LED2：连接到PD2引脚
  - KEY0：连接到PC5引脚
  - KEY1：连接到PA15引脚

- **功能实现**：
  - 通过TIM1的CH1输出PWM信号。
  - 长按按键KEY0，不断增加PWM占空比，控制LED1由暗变亮。
  - 长按按键KEY1，不断减少PWM占空比，控制LED1由亮变暗。
  - LED2每隔一段时间亮灭一次，用于提示系统正常运行。

## 使用说明

1. **硬件连接**：
   - 将LED1连接到STM32的PA8引脚。
   - 将LED2连接到STM32的PD2引脚。
   - 将按键KEY0连接到STM32的PC5引脚。
   - 将按键KEY1连接到STM32的PA15引脚。

2. **软件配置**：
   - 配置TIM1的CH1通道为PWM输出模式。
   - 配置按键KEY0和KEY1为外部中断模式，用于检测按键的长按操作。
   - 配置LED2的闪烁功能，用于系统状态提示。

3. **操作步骤**：
   - 长按KEY0按键，观察LED1逐渐变亮。
   - 长按KEY1按键，观察LED1逐渐变暗。
   - 观察LED2的闪烁，确认系统正常运行。

## 注意事项

- 确保硬件连接正确，避免短路或接错引脚。
- 在调试过程中，注意观察LED的亮度变化是否符合预期。
- 如果系统无法正常工作，检查按键和LED的连接是否正确，以及PWM配置是否正确。

## 总结

本项目通过简单的按键控制实现了PWM占空比的调整，从而实现了呼吸灯效果。通过LED2的闪烁提示，可以确认系统的正常运行状态。希望本项目能够帮助你更好地理解STM32的PWM输出和按键控制功能。

## 下载链接

[STM32按键控制PWM占空比实现呼吸灯效果](https://pan.quark.cn/s/4ee732c56305)