---
layout: post
title: "如何解决ArcGIS打开shapefile时形状数与记录表数不一致的问题"
date:   2020-09-20
tags: [shapefile,dbf,ArcGIS,记录,文件]
comments: true
author: admin
---
# 如何解决ArcGIS打开shapefile时形状数与记录表数不一致的问题

当使用ArcGIS尝试打开shapefile时，你可能遇到这样一个令人头疼的问题：形状数与记录表数不一致。这个问题通常是由于数据编辑过程中软件崩溃、突然关机等原因造成的，导致图形元素的数量与关联的属性表(dbf)中的记录数不相匹配。下面是一步一步的解决方案，帮助你修复这些问题，让你的数据再次顺利在ArcGIS中加载。

## 故障现象
- 打开shapefile时，ArcGIS会报错指出图形的形状数量与dbf属性表的记录数不符。
- 错误可能是由于dbf表缺少或多出一条记录。

## 解决步骤

### 准备工作
1. **下载DBF Viewer 2000**：这是一个便于编辑dbf文件的工具，可以帮助你调整记录数以匹配图形数量。
2. **备份原始文件**：在进行任何修改之前，确保对原有的shapefile组件（.shp, .shx, .dbf）进行备份。

### 步骤一：确认问题
- 检查shapefile的.dbf文件，判断是记录多于形状还是相反。

### 步骤二：编辑DBF文件
1. **使用DBF Viewer 2000**打开.dbf文件的一个副本。
2. 如果形状数多于记录数，**删除多余的记录**；如果记录数多，**增加一条新的空白记录**。记得只需更改数量，不必实际保存改变。
3. 物理删除记录时，请确保存储后的.dbf文件记录数与图形数相符。

### 步骤三：替换文件
- 把修改好的.dbf文件替换到原shapefile文件夹中，确保文件名称与.shp文件相同。

### 尝试加载
- 在ArcGIS中重新尝试加载shapefile。通常，通过上述两种尝试之一，你应该能够成功打开文件。
  
### 备选方法
- 如果直接编辑dbf文件未能解决问题，考虑使用shapechk这样的专用工具来检查和重建shapefile的索引文件(shx)，这有时也可以解决不匹配问题。

### 注意事项
- 确保在整个过程中，所有shapefile的组成部分保持在同一文件夹内，并且名称匹配。
- 对于严重的数据不一致问题，可能需要专业的数据恢复工具或手动数据核对。

以上步骤应能有效应对大多数因形状数与记录表数不一致导致的问题。在处理过程中，耐心细致是关键，记得每次尝试前后都要备份数据以防万一。

## 下载链接

[如何解决ArcGIS打开shapefile时形状数与记录表数不一致的问题](https://pan.quark.cn/s/9647f2ff0bb7)