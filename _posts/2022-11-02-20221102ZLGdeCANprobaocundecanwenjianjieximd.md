---
layout: post
title: "ZLG的CANpro保存的can文件解析"
date:   2021-09-09
tags: [Byte,CANpro,00,报文,软件]
comments: true
author: admin
---
# ZLG的CANpro保存的.can文件解析

## 简介

本资源文件提供了关于ZLG的CANpro软件保存的.can文件的详细解析。CANpro是周立功公司（ZLG）推出的一款用于CAN总线调试的软件，广泛应用于汽车及工业控制领域。该软件支持将CAN总线数据保存为.can、.txt和.asc三种格式，其中.can文件是二进制格式，适用于数据回放和重新导入。

## 文件格式解析

### 文件头

CANpro软件保存的.can文件开头20个字节固定为：
```
5a 68 69 79 75 61 6e 20 43 41 4e 20 44 61 74 61 00 00 00 00
```
翻译为ASCII码即为“Zhiyuan CAN Data”，剩余部分全部为CAN报文数据。

### 单帧报文

每一帧CAN报文数据固定为24个字节，DATA区域固定为8字节，当字节数少于8时自动补零。因此，CANpro软件生成的.can文件保存N帧报文的总字节数可表达为：
```
ByteCount = 20 + 24 × N
```

### 报文结构

.can文件中每一帧报文的各字节定义如下：

- **Byte 0～3**: 报文ID
- **Byte 4～7**: 时间，单位为0.1ms
- **Byte 8**: 时间，与Byte 21～23构成时间
- **Byte 9**: 接收/发送（FF为接收）
- **Byte 10**: 数据帧/远程帧（0为数据帧，1为远程帧）
- **Byte 11**: 标准帧/扩展帧（0为标准帧，1为扩展帧）
- **Byte 12**: 数据长度
- **Byte 13～20**: 8字节数据（Hex）
- **Byte 21～23**: 与Byte 8的低7位构成时间，单位为ms

### 示例

例如，一个CAN报文的解析如下：

- **报文ID**: `f2 27 f1 18`，表示CAN ID为`0x18F127F2`
- **时间**: `37 f5 40 00`，表示425,707.9秒
- **数据帧**: `00 00 e0 2e 88 13 01 00`

## 使用方法

1. **打开.can文件**: 使用CANpro软件或其他支持.can格式的工具打开文件。
2. **数据回放**: 通过CANpro软件的“数据回放”功能，将保存的离线数据进行加载和回放。
3. **数据分析**: 使用二进制文件编辑软件（如Hex Editor Neo）查看和分析.can文件中的数据。

## 注意事项

- CANpro软件生成的.can文件格式与ZCANPRO软件生成的.can文件格式不同，需注意区分。
- 如需了解ZCANPRO软件生成的.can文件解析，请参考相关文档。

## 参考资料

- [ZLG官网](https://www.zlg.cn)
- [CANpro软件使用手册](https://www.zlg.cn/canpro)

## 作者

JaySur

## 版权声明

本文为博主原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接和本声明。

## 下载链接

[ZLG的CANpro保存的.can文件解析分享](https://pan.quark.cn/s/f9718e3698db)