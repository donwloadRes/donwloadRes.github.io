---
layout: post
title: "STM32F4时钟触发ADC双通道采样DMA传输进行FFT测频率采样频率可变显示波形"
date:   2021-09-15
tags: [采样,频率,波形,STM32F4,ADC]
comments: true
author: admin
---
# STM32F4时钟触发ADC双通道采样DMA传输进行FFT+测频率+采样频率可变+显示波形

## 项目描述

本项目使用STM32F4系列单片机（本次使用的是STM32F429，此程序适用于F4全系列，只需注意修改好主频即可）结合陶晶驰3.5寸T0系列串口屏，实现了一个功能强大的信号测量与分析系统。通过触摸屏上的按键开启测量，系统能够显示信号的峰峰值、频率，并绘制波形图。此外，系统还能判断波形类型，并对频率变化的信号进行频率测量后，动态调整时钟触发频率，从而实现采样频率的可变控制。

## 主要功能

1. **双通道ADC采样**：使用STM32F4的ADC模块进行双通道信号采样。
2. **DMA传输**：通过DMA（直接内存访问）将ADC采样数据传输至内存数组中，提高数据传输效率。
3. **FFT分析**：对采样数据进行快速傅里叶变换（FFT），分析信号的频谱特性。
4. **频率测量**：通过FFT分析确定信号的频率，并动态调整采样频率以适应频率变化。
5. **波形显示**：在串口屏上实时显示信号波形，并计算信号的峰峰值（Vpp）。
6. **波形判断**：根据FFT分析结果，判断信号的波形类型，如正弦波、三角波、方波、脉冲波、锯齿波等。
7. **DTMF识别**：对等幅DTMF信号进行识别，并输出波形名称。

## 硬件需求

- STM32F4系列单片机（如STM32F429）
- 陶晶驰3.5寸T0系列串口屏
- 信号发生器或其他信号源

## 软件需求

- STM32CubeMX（用于配置STM32的硬件资源）
- Keil uVision（或其他支持STM32的IDE）
- ARM GCC工具链（用于编译和下载程序）

## 使用说明

1. **硬件连接**：将STM32F4单片机与陶晶驰串口屏连接，确保信号源连接到单片机的ADC输入引脚。
2. **软件配置**：使用STM32CubeMX配置单片机的时钟、ADC、DMA等外设，生成初始化代码。
3. **程序编译**：将生成的初始化代码与本项目提供的源代码合并，使用Keil uVision或其他IDE进行编译。
4. **下载程序**：将编译好的程序下载到STM32F4单片机中。
5. **运行测试**：通过串口屏上的按键启动测量，观察信号的波形、频率、峰峰值等信息，并验证波形判断功能。

## 注意事项

- 在使用不同型号的STM32F4单片机时，需根据实际主频调整时钟配置。
- 信号源的频率范围应与系统的采样频率相匹配，以确保测量结果的准确性。
- 在进行FFT分析时，采样点数的选择会影响频谱分辨率，需根据实际需求进行调整。

## 贡献

欢迎对本项目进行改进和扩展，如果您有任何建议或发现了问题，请提交Issue或Pull Request。

## 许可证

本项目采用MIT许可证，详情请参阅[LICENSE](LICENSE)文件。

## 下载链接

[STM32F4时钟触发ADC双通道采样DMA传输进行FFT测频率采样频率可变显示波形](https://pan.quark.cn/s/e18897516254)