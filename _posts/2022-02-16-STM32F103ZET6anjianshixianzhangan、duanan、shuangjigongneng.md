---
layout: post
title: "STM32F103ZET6按键实现长按、短按、双击功能"
date:   2022-09-18
tags: [按键,双击,短按,STM32F103ZET6,会亮]
comments: true
author: admin
---
# STM32F103ZET6按键实现长按、短按、双击功能

## 项目描述

本项目基于STM32F103ZET6微控制器，实现了按键的长按、短按和双击功能。通过外部中断和定时器监测按键状态，并根据不同的按键操作控制LED灯的亮灭。

## 功能实现

1. **长按功能**：
   - 长按按键时，LED7会亮/灭，并且变量`data`会自增。
   - 长按期间，LED8也会亮/灭。
   - 长按时，通过串口输出当前的`data`值。

2. **短按功能**：
   - 短按按键时，LED6会亮/灭。

3. **双击功能**：
   - 双击按键时，LED8会亮/灭。

## 实现步骤

1. **外部中断监测**：
   - 利用外部中断监测按键是否被按下，当按键被按下时，设置一个标志位为1。

2. **定时器监测**：
   - 使用定时器（20ms）监测标志位和按键状态。
   - 根据按键的不同状态（长按、短按、双击），执行相应的功能。

3. **长按处理**：
   - 在长按期间，使用`while`循环来持续监测按键状态，并更新`data`值。
   - 注意：使用`while`循环会导致阻塞，需根据实际需求进行优化。

## 注意事项

- 本项目使用了`while`循环来处理长按功能，可能会导致程序阻塞。在实际应用中，建议使用状态机或其他非阻塞方式来处理按键事件。
- 定时器的设置和外部中断的配置需根据具体的硬件电路进行调整。

## 使用说明

1. 将代码烧录到STM32F103ZET6开发板上。
2. 连接按键和LED灯到相应的GPIO引脚。
3. 按下按键，观察LED灯的变化，并通过串口查看`data`值的变化。

## 贡献

欢迎提交问题和改进建议，帮助完善本项目。

## 下载链接

[STM32F103ZET6按键实现长按短按双击功能](https://pan.quark.cn/s/61ebd19b9c94)